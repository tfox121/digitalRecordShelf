{"version":3,"sources":["history.js","components/Auth.jsx","api/lastfm.js","components/AuthCallback.jsx","utils/getRandomSubset.js","components/AlbumArtView.jsx","components/AlbumListView.jsx","components/ModeSelector.jsx","components/Main.jsx","components/App.jsx","index.jsx"],"names":["createHistory","Auth","Button","as","href","axios","create","baseURL","getSession","token","a","lastfm","post","response","console","log","data","AuthCallback","URLSearchParams","useLocation","search","get","Header","onClick","getRandomSubset","arr","size","temp","index","shuffled","slice","i","length","Math","floor","random","AlbumArtView","props","albums","bigCarouselRef","useRef","smallCarouselRef","handleOnDragStart","e","preventDefault","handleSlideChange","current","slideTo","item","imagesPlusText","map","album","Segment","basic","inverted","textAlign","Image","onDragStart","autoHeight","src","image","artist","name","images","Container","mouseTrackingEnabled","onSlideChanged","items","dotsDisabled","buttonsDisabled","ref","responsive","0","767","1023","AlbumListView","tracks","Table","celled","unstackable","Row","HeaderCell","Body","key","mbid","Cell","playcount","ModeSelector","useState","activeItem","setActiveItem","handleItemClick","Menu","attached","widths","tabular","Item","active","style","display","Main","loading","setLoading","lastfmUser","setLastfmUser","overallAlbums","setOverallAlbums","lastYearAlbums","setLastYearAlbums","lastSixMonthsArtists","setLastSixMonthsArtists","filteredAlbums","setFilteredAlbums","useEffect","albumfiltered","filter","find","getAlbumTracks","reqURL","params","method","autocorrect","api_key","process","format","limit","results","albummatches","newAlbum","newParams","track","albumWithTracks","ratio","error","userTopMusic","user","period","update","Promise","all","topalbums","sort","b","topartists","handleSubmit","content","Form","action","onSubmit","Field","Input","icon","placeholder","value","onChange","target","Icon","Dimmer","Loader","indeterminate","App","history","className","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.86ce21b0.chunk.js","sourcesContent":["import { createBrowserHistory as createHistory } from 'history';\n\nexport default createHistory();\n","import React from 'react';\nimport { Button } from 'semantic-ui-react';\n\nconst Auth = () => (\n  <div>\n    <Button as=\"a\" href=\"http://www.last.fm/api/auth/?api_key=41a3c4831b1c49de2f9b2f0b1eb52dcb&cb=http://localhost:3000/auth/callback/\">AUTH</Button>\n  </div>\n);\n\nexport default Auth;\n","import axios from 'axios';\n\nconst baseURL = process.env.NODE_ENV === 'development'\n  ? 'http://localhost:8000/auth'\n  : 'https://subreddit-game-api.herokuapp.com/games';\n\nexport default axios.create({ baseURL });","import React from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { Button, Header } from 'semantic-ui-react';\nimport lastfm from '../api/lastfm';\n\nconst useQuery = () => new URLSearchParams(useLocation().search);\n\nconst getSession = async (token) => {\n  const response = await lastfm.post('/lastfm', { token });\n  console.log(response.data);\n};\n\nconst AuthCallback = () => {\n  const query = useQuery();\n  const token = query.get('token');\n  console.log(token);\n\n  const handleClick = () => {\n    getSession(token);\n  };\n\n  return (\n    <div>\n      <Header>CALLBACK</Header>\n      <p>\n        Token =\n        {' '}\n        {token}\n      </p>\n      <Button onClick={handleClick}>GET SESSION</Button>\n    </div>\n  );\n};\n\nexport default AuthCallback;\n","const getRandomSubset = (arr, size) => {\n  const shuffled = arr.slice(0);\n  let i = arr.length;\n  let temp;\n  let index;\n  while (i) {\n    i -= 1;\n    index = Math.floor((i + 1) * Math.random());\n    temp = shuffled[index];\n    shuffled[index] = shuffled[i];\n    shuffled[i] = temp;\n  }\n  return shuffled.slice(0, size);\n};\n\nexport default getRandomSubset;\n","import React, { useRef, useState } from 'react';\nimport AliceCarousel from 'react-alice-carousel';\nimport 'react-alice-carousel/lib/alice-carousel.css';\nimport {\n  Image, Header, Segment, Container,\n} from 'semantic-ui-react';\n\nimport './AlbumArtView.css';\n\nconst AlbumArtView = (props) => {\n  const { albums } = props;\n  const bigCarouselRef = useRef(null);\n  const smallCarouselRef = useRef(null);\n\n\n  const handleOnDragStart = (e) => e.preventDefault();\n\n  const handleSlideChange = (e) => {\n    bigCarouselRef.current.slideTo(e.item);\n    smallCarouselRef.current.slideTo(e.item);\n  };\n\n  const imagesPlusText = albums.map((album) => (\n    <Segment basic inverted textAlign=\"center\">\n      <Image onDragStart={handleOnDragStart} autoHeight=\"true\" src={album.image[3]['#text']} />\n      <Header as=\"h5\">\n        {album.artist.name}\n        {' '}\n        -\n        {' '}\n        {album.name}\n      </Header>\n    </Segment>\n  ));\n\n  const images = albums.map((album) => (\n    <Container>\n      <Image onDragStart={handleOnDragStart} autoHeight=\"true\" src={album.image[3]['#text']} />\n    </Container>\n  ));\n  return (\n    <>\n      <AliceCarousel\n        mouseTrackingEnabled\n        onSlideChanged={handleSlideChange}\n        items={imagesPlusText}\n        dotsDisabled=\"true\"\n        buttonsDisabled=\"true\"\n        ref={bigCarouselRef}\n      />\n      <AliceCarousel\n        mouseTrackingEnabled\n        autoHeight=\"true\"\n        onSlideChanged={handleSlideChange}\n        items={images}\n        ref={smallCarouselRef}\n        responsive={{\n          0: {\n            items: 3,\n          },\n          767: {\n            items: 4,\n          },\n          1023: {\n            items: 5,\n          },\n        }}\n      />\n    </>\n  );\n};\n\nexport default AlbumArtView;\n","import React from 'react';\nimport { Header, Table } from 'semantic-ui-react';\n\nconst AlbumListView = (props) => {\n  const { albums } = props;\n\n  console.log(albums[0].tracks);\n\n  return (\n    <>\n      <Table celled inverted unstackable>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Name</Table.HeaderCell>\n            <Table.HeaderCell>Artist</Table.HeaderCell>\n            <Table.HeaderCell>Plays</Table.HeaderCell>\n            <Table.HeaderCell>Tracks</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {albums.map((album) => (\n            <Table.Row key={album.mbid}>\n              <Table.Cell>{album.name}</Table.Cell>\n              <Table.Cell>{album.artist.name}</Table.Cell>\n              <Table.Cell>{album.playcount}</Table.Cell>\n              <Table.Cell>{album.tracks && album.tracks.length}</Table.Cell>\n            </Table.Row>\n          ))}\n        </Table.Body>\n      </Table>\n      <Header as=\"h5\" textAlign=\"center\">\n        20 of\n        {' '}\n        {albums.length}\n        .\n      </Header>\n    </>\n  );\n};\n\nexport default AlbumListView;\n","import React, { useState } from 'react';\nimport { Menu } from 'semantic-ui-react';\n\nimport AlbumArtView from './AlbumArtView';\nimport AlbumListView from './AlbumListView';\n\nconst ModeSelector = (props) => {\n  const { albums } = props;\n  const [activeItem, setActiveItem] = useState('list');\n\n  if (!albums[0] || !albums[0].tracks) {\n    return null;\n  }\n\n  const handleItemClick = (e, { name }) => setActiveItem(name);\n\n  return (\n    <div>\n      <Menu inverted attached=\"top\" widths=\"2\" tabular>\n        <Menu.Item\n          name=\"list\"\n          active={activeItem === 'list'}\n          onClick={handleItemClick}\n        />\n        <Menu.Item\n          name=\"art\"\n          active={activeItem === 'art'}\n          onClick={handleItemClick}\n        />\n      </Menu>\n\n      <div style={{ display: `${activeItem === 'list' ? 'block' : 'none'}` }}>\n        <AlbumListView albums={albums} />\n      </div>\n      <div style={{ display: `${activeItem === 'art' ? 'block' : 'none'}` }}>\n        <AlbumArtView albums={albums} />\n      </div>\n    </div>\n  );\n};\n\nexport default ModeSelector;\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport {\n  Icon, Input, Segment, Header, Form, Loader, Dimmer, Image,\n} from 'semantic-ui-react';\n\nimport staticData from '../data/staticData';\nimport getRandomSubset from '../utils/getRandomSubset';\n\nimport ModeSelector from './ModeSelector';\n\nconst Main = () => {\n  const [loading, setLoading] = useState(false);\n  const [lastfmUser, setLastfmUser] = useState('foxtrapper121');\n  const [overallAlbums, setOverallAlbums] = useState([]);\n  const [lastYearAlbums, setLastYearAlbums] = useState([]);\n  const [lastSixMonthsArtists, setLastSixMonthsArtists] = useState([]);\n  const [filteredAlbums, setFilteredAlbums] = useState([]);\n\n  useEffect(() => {\n    if (!filteredAlbums.length && (lastYearAlbums && lastSixMonthsArtists)) {\n      let albumfiltered = 0;\n      console.log('PREFILTER', overallAlbums, filteredAlbums);\n      const albums = overallAlbums.filter((album) => {\n        if (!lastYearAlbums.find(({ name }) => name === album.name)\n          && !lastSixMonthsArtists.find(({ name }) => name === album.artist.name)\n          && (!album.tracks || album.tracks.length > 4)) {\n          return true;\n        }\n\n        albumfiltered += 1;\n\n        return false;\n      });\n      console.log(albumfiltered);\n      setFilteredAlbums(albums);\n      console.log('FILTERED', albums);\n      console.log('ARTISTS', lastSixMonthsArtists);\n    }\n  }, [overallAlbums]);\n\n  useEffect(() => {\n    if (filteredAlbums.length) {\n      loading === true && setLoading(false);\n    }\n  }, [filteredAlbums]);\n\n\n  const getAlbumTracks = async (album) => {\n    const reqURL = 'http://ws.audioscrobbler.com/2.0/';\n\n    const params = {\n      method: 'album.getInfo',\n      artist: album.artist.name,\n      album: album.name,\n      autocorrect: 1,\n      api_key: process.env.REACT_APP_LASTFM_API,\n      format: 'json',\n    };\n    try {\n      let response = await axios.get(reqURL, {\n        params,\n      });\n\n      if (!response.data.album) {\n        response = await axios.get(reqURL, {\n          params: {\n            method: 'album.search',\n            limit: '1',\n            album: album.name,\n            api_key: process.env.REACT_APP_LASTFM_API,\n            format: 'json',\n          },\n        });\n        if (response.data.results.albummatches.album[0].name) {\n          const newAlbum = response.data.results.albummatches.album[0];\n          const newParams = {\n            ...params,\n            artist: newAlbum.artist,\n            album: newAlbum.name,\n          };\n          response = await axios.get(reqURL, {\n            params: newParams,\n          });\n        }\n      }\n      if (response.data.album) {\n        const tracks = response.data.album.tracks.track;\n        const albumWithTracks = { ...album, tracks, ratio: album.playcount / tracks.length };\n        return albumWithTracks;\n      }\n      console.log('MISSING', album.name, album.artist.name);\n      return album;\n    } catch (err) {\n      console.error(err);\n      return null;\n    }\n  };\n\n  const userTopMusic = async (method, user, period, limit, update) => {\n    const reqURL = 'http://ws.audioscrobbler.com/2.0/';\n\n    const params = {\n      method,\n      user,\n      limit,\n      period,\n      api_key: process.env.REACT_APP_LASTFM_API,\n      format: 'json',\n    };\n    try {\n      const response = await axios.get(reqURL, {\n        params,\n      });\n      if (method === 'user.getTopAlbums') {\n        if (period === 'overall') {\n          const albumWithTracks = await Promise.all(\n            response.data.topalbums.album.map(async (album) => getAlbumTracks(album)),\n          );\n          albumWithTracks.sort((a, b) => {\n            if (a.ratio > b.ratio) {\n              return -1;\n            }\n            if (a.ratio < b.ratio) {\n              return 1;\n            }\n            return 0;\n          });\n          update(albumWithTracks);\n        }\n        update(response.data.topalbums.album);\n      } else {\n        update(response.data.topartists.artist);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    await userTopMusic('user.getTopAlbums', lastfmUser, '12month', 100, setLastYearAlbums);\n    await userTopMusic('user.getTopArtists', lastfmUser, '6month', 75, setLastSixMonthsArtists);\n    await userTopMusic('user.getTopAlbums', lastfmUser, 'overall', 275, setOverallAlbums);\n    // setFilteredAlbums(staticData);\n    setLoading(false);\n  };\n\n  const loaderRender = () => {\n    if (!loading) {\n      return (\n        <ModeSelector albums={getRandomSubset(filteredAlbums, 15)} />\n      );\n    }\n    return (\n      <Segment>\n        <Dimmer active>\n          <Loader indeterminate>Retrieving Albums</Loader>\n        </Dimmer>\n\n        <Image src=\"https://react.semantic-ui.com/images/wireframe/short-paragraph.png\" />\n      </Segment>\n    );\n  };\n\n\n  return (\n    <>\n      <Header content=\"Digital Record Shelf\" />\n      <Form action=\"submit\" onSubmit={handleSubmit}>\n        <Form.Field>\n          <Input inverted icon placeholder=\"Your Last.fm Username...\">\n            <input value={lastfmUser} onChange={(e) => setLastfmUser(e.target.value)} />\n            <Icon name=\"search\" />\n          </Input>\n        </Form.Field>\n      </Form>\n      {loaderRender()}\n    </>\n  );\n};\n\nexport default Main;\n","import React from 'react';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport { Container, Segment } from 'semantic-ui-react';\n\nimport history from '../history';\nimport './App.css';\n\nimport Auth from './Auth';\nimport AuthCallback from './AuthCallback';\nimport Main from './Main';\n\nconst App = () => (\n  <Router history={history}>\n    <Container>\n      <Segment inverted className=\"app\">\n        <Switch>\n          <Route path=\"/\" exact component={Main} />\n          <Route path=\"/auth\" exact component={Auth} />\n          <Route path=\"/auth/callback/\" exact component={AuthCallback} />\n        </Switch>\n      </Segment>\n    </Container>\n  </Router>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport './semantic-ui/semantic.less';\n\nimport App from './components/App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}